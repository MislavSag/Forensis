# mod_forensis_dokument.R

MUI_forensis_dokument <- function(id) {
  ns <- NS(id)
  fluidPage(
    titlePanel("Forensis Dokument"),
    sidebarLayout(
      sidebarPanel(
        downloadButton(ns("download"), "Preuzmi Dokument")
      ),
      mainPanel(
        tags$head(
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/crosstalk-1.2.1/css/crosstalk.min.css"),
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css"),
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css"),
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/bootstrap/bootstrap.min.css"),
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/bootstrap/bootstrap-icons.css"),
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/htmltools-fill-0.5.8.1/fill.css"),
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/datatables-css-0.0.0/datatables-crosstalk.css"),
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/crosstalk-1.2.1/css/crosstalk.min.css"),
          tags$link(rel = "stylesheet", type = "text/css", href = "forensis_quarto_files/libs/quarto-html/quarto-syntax-highlighting.css"),
          tags$script(src = "forensis_quarto_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"),
          tags$script(src = "forensis_quarto_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"),
          tags$script(src = "forensis_quarto_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"),
          tags$script(src = "forensis_quarto_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"),
          tags$script(src = "forensis_quarto_files/libs/quarto-html/tippy.umd.min.js"),
          tags$script(src = "forensis_quarto_files/libs/quarto-html/popper.min.js"),
          tags$script(src = "forensis_quarto_files/libs/quarto-html/quarto.js"),
          tags$script(src = "forensis_quarto_files/libs/datatables-binding-0.33/datatables.js")
        ),
        uiOutput(ns("quarto_output"))
      )
    )
  )
}

MS_forensis_dokument <- function(input, output, session) {
  output$quarto_output <- renderUI({
    # Koristimo includeHTML za prikazivanje renderiranog dokumenta
    includeHTML("forensis_quarto.html")
  })

  output$download <- downloadHandler(
    filename = function() {
      "forensis_quarto.html"
    },
    content = function(file) {
      # Kopiranje renderiranog dokumenta u download direktorij
      file.copy("forensis_quarto.html", file)
    }
  )
}


# # mod_forensis_dokument.R
#
# MUI_forensis_dokument <- function(id) {
#   ns <- NS(id)
#   fluidPage(
#     titlePanel("Forensis Dokument"),
#     sidebarLayout(
#       sidebarPanel(
#         # Dodajte potrebne UI elemente ovdje
#       ),
#       mainPanel(
#         # Dodajte potrebne UI elemente ovdje
#       )
#     )
#   )
# }
#
# MS_forensis_dokument <- function(input, output, session) {
#   # Dodajte potrebnu server logiku ovdje
# }









#------------------------------
# ovo je za quarto file

---
title: "Forensis Dokument"
format: html
---

```{r setup, include=FALSE}
# Učitavanje potrebnih paketa
library(data.table)
library(DT)

# Učitavanje podataka iz .rds datoteke
final_data <- readRDS("final_data.rds")
```

```{r, echo=FALSE}
# Prikaz podataka u tabličnom obliku
datatable(final_data, escape = FALSE, options = list(
  scrollX = TRUE,  # Omogućava horizontalno pomicanje
  pageLength = 10,  # Postavlja broj redaka po stranici
  columnDefs = list(
    list(targets = ncol(final_data),  # Dinamičko određivanje indeksa stupca Link
         render = JS(
           "function(data, type, row) {
             return type === 'display' && data ? '<a href=\"' + data + '\" target=\"_blank\">Open</a>' : data;
           }"
         )
    )
  )
))

```

